<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Baiter</title>
    <script src="https://js.puter.com/v2/"></script>
    <style>
        body {
            background: #0f172a;
            color: #f8fafc;
            font-family: -apple-system, BlinkMacSystemFont, Inter, Segoe UI, system-ui, sans-serif;
        }
        .auth-section { position: fixed; top: 20px; right: 20px; display: flex; gap: 12px; }
        .login-btn, .logout-btn {
            padding: 12px 20px;
            border: 1px solid #dc2626;
            border-radius: 6px;
            background: #dc2626;
            color: white;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
        }
        .login-btn.hidden { display: none !important; }
        .logout-btn { background: #ef4444; border-color: #ef4444; }
        .user-info { display: flex; align-items: center; gap: 8px; background: #1e293b; border-radius: 6px; border: 1px solid #334155; padding: 8px 12px; }
        .status-dot { width: 6px; height: 6px; background: #dc2626; border-radius: 50%; }
        .container { max-width: 1000px; margin: 0 auto; padding: 60px 20px 40px; }
        .hero-section { text-align: center; padding: 80px 0 60px; }
        .hero-title { font-size: 4rem; font-weight: 900; margin-bottom: 20px; background: linear-gradient(135deg,#dc2626,#f59e0b); -webkit-background-clip: text;-webkit-text-fill-color: transparent;background-clip: text; text-transform: uppercase; letter-spacing: -2px;}
        .generate-section { background: #1e293b; border-radius: 16px; padding: 40px; border: 1px solid #334155; margin-bottom: 50px; text-align: center;}
        .generate-btn { padding: 20px 40px; background:linear-gradient(135deg,#dc2626,#b91c1c);color:white;border:none;border-radius:12px;font-size:18px;font-weight:700;cursor:pointer;transition:.3s;text-transform:uppercase;letter-spacing:1px;}
        .generate-btn:disabled { opacity: .6; cursor: not-allowed;}
        .btn-loader {width:24px;height:24px;border:3px solid rgba(255,255,255,.3);border-top:3px solid white;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto;}
        @keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
        .results-section {margin-top:50px;}
        .results-title {text-align:center;font-size:2.5rem;font-weight:900;margin-bottom:40px;color:#dc2626;text-transform:uppercase;}
        .results-grid {display:grid;gap:20px;grid-template-columns:1fr;}
        .result-card {background:#1e293b;border-radius:12px;padding:24px;border:1px solid #334155;}
        .roast-number {background:linear-gradient(135deg,#dc2626,#f59e0b);color:white;padding:6px 12px;border-radius:20px;font-weight:700;font-size:12px;display:inline-block;margin-bottom:16px;text-transform:uppercase;}
        .roast-text {font-size:18px;line-height:1.6;margin-bottom:20px;color:#f8fafc;background:#0f172a;padding:24px;border-radius:12px;border-left:4px solid #dc2626;font-weight:600;}
        .copy-btn {width:100%;padding:14px;background:#64748b;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:.2s;font-size:14px;text-transform:uppercase;}
        .toast {position:fixed;top:80px;right:20px;background:#1e293b;color:#f8fafc;padding:16px 24px;border-radius:12px;border:1px solid #334155;z-index:1000;transform:translateX(100%);transition:.3s;font-weight:500;opacity:0;}
        .toast.show {transform:translateX(0);opacity:1;}
        .toast.success {border-color:#10b981;background:rgba(16,185,129,0.1);}
        .toast.error {border-color:#ef4444;background:rgba(239,68,68,0.1);}
    </style>
</head>
<body>
    <div class="auth-section">
        <button id="loginBtn" class="login-btn">Connect</button>
        <div id="userInfo" class="user-info hidden">
            <div class="status-dot"></div>
            <span id="userName"></span>
            <button id="logoutBtn" class="logout-btn">Logout</button>
        </div>
    </div>
    <div class="container">
        <section class="hero-section"><h1 class="hero-title">Ragebait 'em</h1></section>
        <section class="generate-section">
            <h2 class="generate-title">Ragebait 'em</h2>
            <p class="generate-subtitle">Imagine being so unemployed you gotta use ts ðŸ¥€</p>
            <button id="generateBtn" class="generate-btn" disabled>
                <span class="btn-text">bait 'em all</span>
                <div class="btn-loader hidden"></div>
            </button>
        </section>
        <section class="results-section">
            <div id="resultsContainer" class="results-container hidden">
                <h2 class="results-title">Here you go gng</h2>
                <div class="results-grid" id="resultsGrid"></div>
            </div>
        </section>
    </div>
    <div id="toast" class="toast"></div>
    <script>
    var SavageAIApp = {
        state: { loggedIn: false, user: null, loading: false, count: 0 },
        el: {},
        start: function() {
            this.getElements();
            this.bindEvents();
            this.checkAuth();
        },
        getElements: function() {
            this.el.loginBtn = document.getElementById('loginBtn');
            this.el.logoutBtn = document.getElementById('logoutBtn');
            this.el.userInfo = document.getElementById('userInfo');
            this.el.userName = document.getElementById('userName');
            this.el.generateBtn = document.getElementById('generateBtn');
            this.el.btnText = document.querySelector('.btn-text');
            this.el.btnLoader = document.querySelector('.btn-loader');
            this.el.resultsContainer = document.getElementById('resultsContainer');
            this.el.resultsGrid = document.getElementById('resultsGrid');
            this.el.toast = document.getElementById('toast');
        },
        bindEvents: function() {
            var self = this;
            this.el.loginBtn.onclick = function() { self.login(); };
            this.el.logoutBtn.onclick = function() { self.logout(); };
            this.el.generateBtn.onclick = function() { self.generate(); };
            document.onclick = function(e) {
                if (e.target.classList.contains('copy-btn')) {
                    var text = e.target.getAttribute('data-text');
                    self.copyText(text, e.target);
                }
            };
        },
        checkAuth: function() {
            this.state.loggedIn = false;
            this.state.user = null;
            this.updateUI();
        },
        login: function() {
            var self = this;
            this.el.loginBtn.disabled = true;
            this.el.loginBtn.textContent = 'Connecting...';
            puter.auth.signIn().then(function() {
                return puter.auth.getUser();
            }).then(function(user) {
                self.state.loggedIn = true;
                self.state.user = user;
                self.updateUI();
                self.notify('Connected successfully!', 'success');
            }).catch(function() {
                self.resetLogin();
                self.notify('Connection failed', 'error');
            });
        },
        logout: function() {
            var self = this;
            if (puter.auth && puter.auth.signOut) {
                puter.auth.signOut().then(function() {
                    self.forceLogout();
                }).catch(function() {
                    self.forceLogout();
                });
            } else {
                this.forceLogout();
            }
        },
        forceLogout: function() {
            this.state.loggedIn = false;
            this.state.user = null;
            this.updateUI();
            this.notify('Logged out', 'success');
        },
        resetLogin: function() {
            this.el.loginBtn.disabled = false;
            this.el.loginBtn.textContent = 'Connect';
        },
        updateUI: function() {
            if (this.state.loggedIn && this.state.user) {
                this.el.loginBtn.classList.add('hidden');
                this.el.userInfo.classList.remove('hidden');
                this.el.userName.textContent = this.state.user.username || 'User';
                this.el.generateBtn.disabled = false;
            } else {
                this.el.loginBtn.classList.remove('hidden');
                this.el.userInfo.classList.add('hidden');
                this.el.generateBtn.disabled = true;
                this.resetLogin();
            }
        },
        generate: function() {
            if (!this.state.loggedIn || this.state.loading) {
                this.notify('Please connect first', 'error');
                return;
            }
            var self = this;
            this.setLoading(true);
            this.state.count++;
            var enhancedPrompt = this.buildEnhancedPrompt();
            var timeoutId = setTimeout(function() {
                var fallbacks = self.getBrutalFallbacks();
                self.showRoasts(fallbacks);
                self.notify('AI timeout - using brutal offline roasts! Set #' + self.state.count, 'error');
                self.setLoading(false);
            }, 10000);
            puter.ai.chat(enhancedPrompt).then(function(response) {
                clearTimeout(timeoutId);
                let content = "";
                if (typeof response === "string") content = response;
                else if (response && response.content) content = response.content;
                else if (response && response.message && response.message.content) content = response.message.content;
                else content = JSON.stringify(response);

                var roasts = self.parseEnhancedResponse(content);
                if (roasts && roasts.length >= 5) {
                    self.showRoasts(roasts.slice(0, 5));
                    self.notify('AI generated brutal roasts! Set #' + self.state.count, 'success');
                } else {
                    var fallbacks = self.getBrutalFallbacks();
                    self.showRoasts(fallbacks);
                    self.notify('AI parsing failed - using fallbacks! Set #' + self.state.count, 'error');
                }
                self.setLoading(false);
            }).catch(function() {
                clearTimeout(timeoutId);
                var fallbacks = self.getBrutalFallbacks();
                self.showRoasts(fallbacks);
                self.notify('AI error - using brutal fallbacks! Set #' + self.state.count, 'error');
                self.setLoading(false);
            });
        },
        // PROMPT: MAXIMUM TOXICITY, ONLY ONE or TWO Gen Z WORDS ALLOWED PER ROAST
        buildEnhancedPrompt: function() {
            var topics = [
                "career failures nobody wants to witness",
                "existence that lowers the bar for everyone",
                "dating disasters that make others afraid to try",
                "why your presence ruins any good mood",
                "the kind of stupidity that makes goldfish look smart"
            ];
            var topic = topics[this.state.count % topics.length];
            return (
`You are writing for a savage Gen Z comedy roast. Write 5 EXTREMELY brutal, creative, and psychologically damaging roast insults about "${topic}". Each roast must:
- Use only one or two Gen Z slang words like "fr", "deadass", "rizz", "skull", "mid", "no cap", "cringe", "npc", "ratio".
- Each roast must be unique, long (25-40 words), references real failures, existence, relationships, intelligence, appearance, parents etc. NO generic lines or nice guy disclaimers, and do not reference being an AI.
- The tone must be as savage as: "Every conversation with you feels like a waste of oxygen that could have been better used by literally anything else." or "You're the poster child for why some people shouldn't reproduce."
- Return as a single numbered list, roasts 1-5, nothing else.
1.
2.
3.
4.
5.`
            );
        },
        parseEnhancedResponse: function(content) {
            var roasts = [];
            var lines = content.split('\n');
            for (var i = 0; i < lines.length; i++) {
                var line = lines[i].trim();
                if (/^\d+[\.\)]\s+/.test(line)) {
                    var roast = line.replace(/^\d+[\.\)]\s+/, '').trim();
                    if (roast.length > 15) roeasts.push(roast);
                } else if (/^\d+\s+/.test(line) && line.length > 20) {
                    var roast = line.replace(/^\d+\s+/, '').trim();
                    roasts.push(roast);
                }
            }
            return roasts.length >= 5 ? roasts : null;
        },
        getBrutalFallbacks: function() {
            var brutalSets = [
                [
                    "Every conversation with you feels like a waste of oxygen that could have been better used by literally anything else.",
                    "You're the type of person who makes everyone around you question their life choices, starting with whoever raised you, fr.",
                    "You're the poster child for why some people shouldn't reproduce. The gene pool is better for every day you stay single, no cap.",
                    "It's wild that you turned out this way and your parents still found time to take family photos, deadass.",
                    "You walk into a room and the collective IQ lowers with every step you take. Ratio."
                ],
                [
                    "No matter what you do, you'll always be remembered as the reason HR invented performance improvement plans.",
                    "You're living proof that rock bottom is actually a trampoline. Mid at best.",
                    "The only thing you've ever managed to accomplish is being a cautionary tale for other peopleâ€™s kids.",
                    "Your dating history could be used as an anti-romance PSA, fr.",
                    "If common sense was currency, you'd be in the red for generations. Skull."
                ]
            ];
            return brutalSets[this.state.count % brutalSets.length];
        },
        showRoasts: function(roasts) {
            this.el.resultsGrid.innerHTML = '';
            for (var i = 0; i < roasts.length; i++) {
                var card = document.createElement('div');
                card.className = 'result-card';
                card.innerHTML = '<div class="roast-number">Roast #' + (i + 1) + '</div>' +
                                '<div class="roast-text">' + roasts[i] + '</div>' +
                                '<button class="copy-btn" data-text="' + roasts[i] + '">Copy Roast</button>';
                this.el.resultsGrid.appendChild(card);
            }
            this.el.resultsContainer.classList.remove('hidden');
            var self = this;
            setTimeout(function() {
                self.el.resultsContainer.scrollIntoView({behavior: 'smooth'});
            }, 200);
        },
        copyText: function(text, button) {
            var self = this;
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(function() {
                        self.showCopied(button);
                        self.notify('Copied that burn!', 'success');
                    }).catch(function() {
                        self.fallbackCopy(text, button);
                    });
                } else {
                    this.fallbackCopy(text, button);
                }
            } catch (e) {
                this.fallbackCopy(text, button);
            }
        },
        fallbackCopy: function(text, button) {
            var textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            this.showCopied(button);
            this.notify('Copied!', 'success');
        },
        showCopied: function(button) {
            var original = button.textContent;
            button.textContent = 'âœ“ Copied!';
            button.classList.add('copied');
            setTimeout(function() {
                button.textContent = original;
                button.classList.remove('copied');
            }, 1500);
        },
        setLoading: function(loading) {
            this.state.loading = loading;
            if (loading) {
                this.el.generateBtn.disabled = true;
                this.el.btnText.classList.add('hidden');
                this.el.btnLoader.classList.remove('hidden');
            } else {
                this.el.generateBtn.disabled = !this.state.loggedIn;
                this.el.btnText.classList.remove('hidden');
                this.el.btnLoader.classList.add('hidden');
            }
        },
        notify: function(message, type) {
            var self = this;
            this.el.toast.className = 'toast';
            this.el.toast.style.opacity = '0';
            setTimeout(function() {
                self.el.toast.textContent = message;
                self.el.toast.classList.add(type || 'info');
                setTimeout(function() {
                    self.el.toast.classList.add('show');
                    self.el.toast.style.opacity = '1';
                }, 50);
                setTimeout(function() {
                    self.el.toast.classList.remove('show');
                    self.el.toast.style.opacity = '0';
                }, 3500);
            }, 100);
        }
    };
    document.addEventListener('DOMContentLoaded', function() {
        SavageAIApp.start();
    });
    </script>
</body>
</html>
